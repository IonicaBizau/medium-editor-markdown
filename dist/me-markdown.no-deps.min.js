!function(e,t){"object"==typeof exports?module.exports=t(require("medium-editor"),require("to-markdown")):"function"==typeof define&&define.amd?define(["medium-editor","to-markdown"],t):e.MeMarkdown=t(MediumEditor,toMarkdown)}(this,function(e,t){if("function"!=typeof e)throw new Error("Medium Editor is not loaded");if("function"!=typeof t)throw new Error("toMarkdown is not loaded");return function(e,n){function o(e){for(var t=e.children,n=0;n<t.length;++n){var r=t[n],i=r.querySelector("br");i&&i.remove(),!r.innerHTML.trim()&&r.remove();var u=t[n-1];if(/^UL|OL$/.test(r.tagName)){try{u.appendChild(r)}catch(e){console.warn(e)}o(r)}}}"function"==typeof e&&(n=e,e={}),e=Object(e),e.events=e.events||["input","change"],n=n||e.callback||function(){};var r=e.toMarkdownOptions=Object(e.toMarkdownOptions);r.converters=r.converters||[],e.ignoreBuiltInConverters||r.converters.push({filter:function(e){return"DIV"===e.nodeName&&!e.attributes.length},replacement:function(e){return e}}),this.init=function(){if(this.base.elements&&this.base.elements.length){this.element=this.base.elements[0];var r=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/,i=function(){for(var i=this.element.cloneNode(!0),u=i.querySelectorAll("ul, ol"),a=0;a<u.length;++a)o(u[a]);n(t(i.innerHTML,e.toMarkdownOptions).split("\n").map(function(e){return e.replace(r,"")}).join("\n").replace(r,""))}.bind(this);e.events.forEach(function(e){this.element.addEventListener(e,i)}.bind(this)),i()}}}});
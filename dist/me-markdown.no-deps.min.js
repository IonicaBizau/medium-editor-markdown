!function(e){if("function"!=typeof MediumEditor)throw new Error("Medium Editor is not loaded on the page.");var n=function(e,n){function t(e){for(var n=e.children,r=0;r<n.length;++r){var i=n[r],u=i.querySelector("br");u&&u.remove(),!i.innerHTML.trim()&&i.remove();var o=n[r-1];if(/^UL|OL$/.test(i.tagName)){try{o.appendChild(i)}catch(e){console.warn(e)}t(i)}}}"function"==typeof e&&(n=e,e={}),e=Object(e),e.events=e.events||["input","change"],n=n||e.callback||function(){};var r=e.toTurndownOptions=Object(e.toTurndownOptions);r.converters=r.converters||[],r.customRules=r.customRules||[],e.ignoreBuiltinConverters||r.converters.push({filter:function(e){return"DIV"===e.nodeName&&!e.attributes.length},replacement:function(e){return e}}),this.init=function(){if(this.base.elements&&this.base.elements.length){this.element=this.base.elements[0];var i=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/,u=function(){for(var u=this.element.cloneNode(!0),o=u.querySelectorAll("ul, ol"),s=0;s<o.length;++s)t(o[s]);var c=new TurndownService(e.toTurndownOptions);r.customRules.forEach(function(e){c.addRule(e.key,{filter:e.filter,replacement:e.replacement})}),n(c.turndown(u.innerHTML).split("\n").map(function(e){return e.replace(i,"")}).join("\n").replace(i,""))}.bind(this);e.subscribeToMeEditableInput?this.base.subscribe("editableInput",u):e.events.forEach(function(e){this.element.addEventListener(e,u)}.bind(this)),u()}}};e.MeMarkdown=n}(this);